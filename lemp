#!/usr/bin/env sh
# Usage: lixreq lemp <phpversion: {N.N}>

set +e

me="lemp"
echo ''
echo === Setup $me ===
phpversion=$1

test -n "$phpversion" || { echo "$me: Parameter 1 is missing: phpversion" >&2; exit 1; } 

if ! testc nginx; then
	pkgreq nginx
	rm /etc/nginx/sites-enabled/default
	rm -r /var/www/html
	svcrun nginx
fi

if ! testc php; then
	lixreq php $phpversion
	svcrun php$phpversion-fpm
	svcrun nginx
fi

if ! testc mysql; then
	pkgreq mariadb-server
fi

set -e

